[TOC]

## 26 | 红黑树（下）：掌握这些技巧，你也可以实现一个红黑树

![img](https://static001.geekbang.org/resource/image/57/ed/578b1b7602a9f03a7e900145f91fa6ed.jpg)

1.　学习要求
	- 只需要能看懂我讲的过程，没有知识盲点，就算是掌握了这部分内容了。

### 基本思想

1.　平衡过程
	- **遇到什么样的节点排布，我们就对应怎么去调整。**
2.　红黑树的定义
	- **根节点**是黑色的；
	- 每个**叶子节点**都是黑色的空节点（NIL），也就是说，叶子节点不存储数据；
	- 任何**相邻的节点**都不能同时为红色，也就是说，红色节点是被黑色节点隔开的；
	- 每个节点，**从该节点到达其可达叶子节点的所有路径**，都包含相同数目的黑色节点。

### 插入的平衡调整

##### CASE 1: 如果关注节点是 a ，那它的叔叔节点 d 是红色

##### CASE 2: 如果关注节点是 a，那它的叔叔节点d 是黑树，关注节点 a 是其父节点 b 的右子节点

##### CASE3: 如果关注节点是 a，它的叔叔节点 d 是黑色，关注节点 a 是其父节点的 b 的左子节点

### 删除的平衡调整

#### 1. 针对删除节点初步调整

##### CASE 1: 如果要删除的节点是 a，它只有一个子节点 b

##### CASE 2: 如果要删除的节点 a 有两个非空子节点，并且它的后继节点就是节点 a 的右子节点

##### CASE 3: 如果要删除的节点 a，它有两个非空子节点，并且节点 a 的后继节点不 右子节点

#### 2. 针对关注节点进行二次调整

##### CASE 1: 如果关注节点是 a ，它的兄弟节点 c  红色的。

##### CASE 2: 如果关注节点是 a，它的兄弟节点 c 是黑色的，并且节点 c 的左右子节点 d、e 都是黑色的。

##### CASE 3: 如果关注节点是 a ，它的兄弟节点 c 是黑色，c 的左子节点是红色，c 的右子节点e 是黑色

##### CASE 4: 如果关注节点 a 的兄弟节点 c 是黑色，并且 c 的右子节点是红色，

### 小结

1.　把红黑树的平衡调整的过程比作魔方复原，**不要过于深究**这个算法的正确性。
2.　找准**关注节点**，不要搞丢、搞错关注节点。
3.　**插入**操作的平衡调整比较简单，但是**删除**操作就比较复杂。

### 课后思考

