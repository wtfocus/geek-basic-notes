[toc]

## 加餐 | 重构

-   《重构：改善既有代码的设计》 -- Martin Fowler (1999)

### 重构，是一种微操作

1.  重构，**本质**就是一个“**微操作**”的实践。

2.  **含义**：**你需要把做的代码调整成若干可以单独进行的“重构”小动作，然后一步一步完成它**。

    >   如：提取业务类中一个通用方法，把它挪到一个通用类里。重构手法分解：
    >
    >   
    >
    >   	1. 添加一个新的通用类，用于放置这个方法。
    >    	2. 在业务类中添加一个字段，其类型就是新添加的通用类。
    >    	3. 搬移实例方法，将这个方法移动到新的类里面。

    -   在这个分解出来的步骤里，**每一步都可以完成，而且，每做一步都是可以停下来的**。

3.  重构更重要的是，你需要有的是“**把调整代码的动作分解成一个个重构小动作**”的能力。

### 重构地图

1.  Martin Fowler 给出了两个重构的定义：

    >   重构（名词）：
    >
    >   ​	对软件内部结构的一种调整，目的是在不改变软件可观察行为的前提下，提高其可理解性，降低其修改成本。
    >
    >   
    >
    >   重构（动词）：
    >
    >   ​	使用一系列重构手法，在不改变软件可观察行为的前提下，调整其结构。

2.  我们为什么要调整？

    -   **“代码的坏味道”** -- Martin Fowler （《重构》中，第三章《代码的坏味道》）

3.  如果判断“重构是要不改变软件的可观察行为”？

    -   **测试**

4.  重构到什么程度算一个头呢？

    -   **《重构成模式》**
    -   **《Clean Code》**

### 总结

1.  重构
    -   **本质**上就是一堆**微操作**。
    -   **实践的核心**，就是将调整代码的动作**分解**成一个一个的小动作。

2.  一句话总结：
    -   **“锤炼你的重构技能”**