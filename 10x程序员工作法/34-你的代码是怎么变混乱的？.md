[toc]

## 34 | 你的代码是怎么变混乱的？

1.  话题：软件内部 --> 写代码。

### 逐步腐化的代码

1.  开发流程：新需求 --> 在原代码上添加一段新的逻辑 --> 提交。
2.  问题：**只是低头完成了一项任务，代码却变得更糟糕**。
3.  解决方案：**重构** --> 前提（代码驶向何方） --> **软件设计**

### SOLID 原则

1.  面向对象设计原则：**SOLID** -- Robert Martin 《敏捷软件开发：原则、实践与模式》.

    >   单一职责原则（Single responsibility principle，SRP）
    >
    >   开放封闭原则（Open–closed principle，OCP）
    >
    >   Liskov 替换原则（Liskov substitution principle，LSP）
    >
    >   接口隔离原则（Interface segregation principle，ISP）
    >
    >   依赖倒置原则（Dependency inversion principle，DIP）

2.  学习这些设计原则有什么用呢？

    -   **设计模式 --> “术”，设计原则 --> “道”**。
    -   道和术，是每个程序员都要有的功夫。
    -   在“术”上下过功夫，才会知识“道”的价值。
    -   “道”可以帮你建立更完整的知识体系，不必有“术”的低层次上不断徘徊。

### 单一职责原则

1.  什么是单一职责原则呢？
    -   **“一个模块应该仅有一个修改的原因”** -- 《敏捷软件开发：原则、实践与模式》。
    -   **“一个模块应该仅对一类 actor 负责”** -- 《架构整洁之道》 Robert Martin 2017。

### 编写短函数

1.  你能看到一个模块有为多少 actor 服务，完全取决于你的分解能力。
2.  不讨论前提条件，只谈论函数长短，其实是没有意义的。
3.  看到的粒度越细，越能发现问题。

### 总结

1.  很多代码问题是因为对设计思考得不足导致的。
2.  设计原则，是一个更好的体系。
3.  能看到多小，就能发现代码里多少的问题。
4.  一句话总结
    -   **把函数写短**

